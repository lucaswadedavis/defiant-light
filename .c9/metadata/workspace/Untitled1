{"changed":true,"filter":false,"title":"Untitled1","tooltip":"/Untitled1","value":"var Mandrill = require('mandrill');\n\nMandrill.initialize('YJsdSiJ-lK2LfRNvDRPGVA');\n\n// var fauxPoe = require('cloud/faux-poe.js');\n\n\n// Use Parse.Cloud.define to define as many cloud functions as you want.\n// For example:\nParse.Cloud.define(\"coinbase\", function(request, response) {\n  //this is how to set up a route\n  \n});\n\n\nParse.Cloud.job(\"canary\", function(request, response) {\n  \n  // var email=\"ebplaysgolf.forfun@yahoo.com\";  \n  // var bitcoinAddressID=Math.floor(10000*Math.random());  \n    \n    \n  // var Transaction = Parse.Object.extend(\"Transaction\");\n  // var transaction = new Transaction();\n  // transaction.set(\"email\",email);\n  // transaction.set('complete',false);\n  // transaction.set('btcID',bitcoinAddressID);\n  // transaction.save();\n  \n Mandrill.sendEmail({\n  message: {\n    text: \"Hello World!\",\n    subject: \"Using Cloud Code and Mandrill is great!\",\n    from_email: \"parse@cloudcode.com\",\n    from_name: \"Cloud Code\",\n    to: [\n      {\n        email: \"lucaswadedavis@gmail.com\",\n        name: \"LUUUUUKE!\"\n      }\n    ]\n  },\n  async: true\n},{\n  success: function(httpResponse) {\n    console.log(httpResponse);\n    response.success(\"Email sent!\");\n  },\n  error: function(httpResponse) {\n    console.error(httpResponse);\n    response.error(\"Uh oh, something went wrong\");\n  }\n});\n  // ,{\n  //   success: function(httpResponse) {\n  //     console.log(httpResponse);\n  //     response.success(\"Email sent!\");\n  //   },\n  //   error: function(httpResponse) {\n  //     console.error(httpResponse);\n  //     response.error(\"Uh oh, something went wrong\");\n  //   }\n  // });\n    \n\n  \n  // status.success('Cheep' );\n    \n  \n  // Mandrill.sendEmail({\n  //   message: {\n  //     text: \"Your content is attached!\",\n  //     subject: \"Thanks for using Defiant Light!\",\n  //     from_email: \"parse@cloudcode.com\",\n  //     from_name: \"Defiant Light\",\n  //     to: [\n  //       {\n  //         email: \"ebplaysgolf.forfun@yahoo.com\",\n  //         name: \"Customer\"\n  //       }\n  //     ],\n  //     attachments: [\n  //       {\n  //         \"type\": \"text/plain\",\n  //         \"name\": \"myfile.txt\",\n  //         \"content\": \"testing\"\n  //       }\n  //     ]\n  //   },\n  //   async: true\n  // },{\n  //   success: function(httpResponse) {\n  //     console.log(httpResponse);\n  //     response.success(\"Email sent!\");\n  //   },\n  //   error: function(httpResponse) {\n  //     console.error(httpResponse);\n  //     response.error(\"Uh oh, something went wrong\");\n  //   }\n  // });  \n  \n  //status.error(\"Uh oh, something went wrong.\");\n\n  //this is where we'll hit the Coinbase API\n    //that should return a list of transactions\n  //Once every 15 minutes we'll loop through all the transactions we've saved in our database\n    //and check each one against all the recent transactions sent back from the Coinbase API\n    //if there's a match, we'll run our code\n    //which should return a zipped file\n    //which we'll email to the correct client's email address in an attachment\n    //finally we'll change the 'completed' column to true.\n    \n  \n\n});","undoManager":{"mark":-1,"position":0,"stack":[[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":113,"column":3},"action":"insert","lines":["var Mandrill = require('mandrill');","","Mandrill.initialize('YJsdSiJ-lK2LfRNvDRPGVA');","","// var fauxPoe = require('cloud/faux-poe.js');","","","// Use Parse.Cloud.define to define as many cloud functions as you want.","// For example:","Parse.Cloud.define(\"coinbase\", function(request, response) {","  //this is how to set up a route","  ","});","","","Parse.Cloud.job(\"canary\", function(request, response) {","  ","  // var email=\"ebplaysgolf.forfun@yahoo.com\";  ","  // var bitcoinAddressID=Math.floor(10000*Math.random());  ","    ","    ","  // var Transaction = Parse.Object.extend(\"Transaction\");","  // var transaction = new Transaction();","  // transaction.set(\"email\",email);","  // transaction.set('complete',false);","  // transaction.set('btcID',bitcoinAddressID);","  // transaction.save();","  "," Mandrill.sendEmail({","  message: {","    text: \"Hello World!\",","    subject: \"Using Cloud Code and Mandrill is great!\",","    from_email: \"parse@cloudcode.com\",","    from_name: \"Cloud Code\",","    to: [","      {","        email: \"lucaswadedavis@gmail.com\",","        name: \"LUUUUUKE!\"","      }","    ]","  },","  async: true","},{","  success: function(httpResponse) {","    console.log(httpResponse);","    response.success(\"Email sent!\");","  },","  error: function(httpResponse) {","    console.error(httpResponse);","    response.error(\"Uh oh, something went wrong\");","  }","});","  // ,{","  //   success: function(httpResponse) {","  //     console.log(httpResponse);","  //     response.success(\"Email sent!\");","  //   },","  //   error: function(httpResponse) {","  //     console.error(httpResponse);","  //     response.error(\"Uh oh, something went wrong\");","  //   }","  // });","    ","","  ","  // status.success('Cheep' );","    ","  ","  // Mandrill.sendEmail({","  //   message: {","  //     text: \"Your content is attached!\",","  //     subject: \"Thanks for using Defiant Light!\",","  //     from_email: \"parse@cloudcode.com\",","  //     from_name: \"Defiant Light\",","  //     to: [","  //       {","  //         email: \"ebplaysgolf.forfun@yahoo.com\",","  //         name: \"Customer\"","  //       }","  //     ],","  //     attachments: [","  //       {","  //         \"type\": \"text/plain\",","  //         \"name\": \"myfile.txt\",","  //         \"content\": \"testing\"","  //       }","  //     ]","  //   },","  //   async: true","  // },{","  //   success: function(httpResponse) {","  //     console.log(httpResponse);","  //     response.success(\"Email sent!\");","  //   },","  //   error: function(httpResponse) {","  //     console.error(httpResponse);","  //     response.error(\"Uh oh, something went wrong\");","  //   }","  // });  ","  ","  //status.error(\"Uh oh, something went wrong.\");","","  //this is where we'll hit the Coinbase API","    //that should return a list of transactions","  //Once every 15 minutes we'll loop through all the transactions we've saved in our database","    //and check each one against all the recent transactions sent back from the Coinbase API","    //if there's a match, we'll run our code","    //which should return a zipped file","    //which we'll email to the correct client's email address in an attachment","    //finally we'll change the 'completed' column to true.","    ","  ","","});"]}]}]]},"ace":{"folds":[],"scrolltop":60,"scrollleft":0,"selection":{"start":{"row":21,"column":0},"end":{"row":26,"column":24},"isBackwards":true},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":3,"state":"start","mode":"ace/mode/text"}},"timestamp":1421975341944}